<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>3D Globe</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
    }
    #globeViz {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="globeViz"></div>

  <!-- Scripts in richtiger Reihenfolge -->
  <script src="https://unpkg.com/three"></script>
  <script src="https://unpkg.com/globe.gl"></script>
  <script src="https://unpkg.com/topojson@3"></script>

  <script>
    const world = Globe()
      (document.getElementById('globeViz'))
      .globeImageUrl('https://unpkg.com/three-globe/example/img/earth-dark.jpg')
      .backgroundColor('rgba(0,0,0,0)')
      .polygonCapColor(() => 'rgba(200, 0, 0, 0.4)')
      .polygonSideColor(() => 'rgba(255, 255, 255, 0.05)')
      .polygonStrokeColor(() => '#111')
      .polygonLabel(({ properties: d }) => `${d.ADMIN || d.name || ''}`)
      .polygonsData([]);

    // Kamera auf bestimmtes Land zentrieren (z.B. Deutschland)
    function flyToCountry(countryName) {
      fetch('https://unpkg.com/world-atlas@2.0.2/countries-110m.json')
        .then(res => res.json())
        .then(worldData => {
          const countries = topojson.feature(worldData, worldData.objects.countries).features;
          const match = countries.find(c => (c.properties.ADMIN || c.properties.name) === countryName);
          if (match) {
            const [lng, lat] = d3.geoCentroid(match);
            world.pointOfView({ lat, lng, altitude: 1.5 }, 3000);
            world.polygonsData(countries);
          } else {
            console.warn('Land nicht gefunden:', countryName);
          }
        })
        .catch(err => console.error('Fehler beim Laden der LÃ¤nder:', err));
    }

    // Beispiel: Fokus auf Deutschland
    flyToCountry('Germany');
  </script>

  <!-- D3 zur Berechnung von geoCentroid -->
  <script src="https://d3js.org/d3-geo.v1.min.js"></script>
</body>
</html>
